<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE article [
<!ENTITY % BOOK_ENTITIES SYSTEM "Release_Notes.ent">
%BOOK_ENTITIES;
<!ENTITY % sgml.features "IGNORE">
<!ENTITY % xml.features "INCLUDE">
<!ENTITY % DOCBOOK_ENTS PUBLIC "-//OASIS//ENTITIES DocBook Character Entities V4.5//EN" "/usr/share/xml/docbook/schema/dtd/4.5/dbcentx.mod">
%DOCBOOK_ENTS;
]>
<article version="5.0" xmlns="http://docbook.org/ns/docbook"
	 xmlns:xlink="http://www.w3.org/1999/xlink"
	 xmlns:xi="http://www.w3.org/2001/XInclude">
  <info xml:id="info-Qlustar_Cluster_OS-Release_Notes-Release_Notes">
    <title>Release Notes</title>
    <subtitle></subtitle>
    <productname>Qlustar Cluster OS</productname>
    <productnumber>10.1</productnumber>
    <edition>1</edition>
    <abstract>
      <para>
	The 10.1 release extends Qlustar's reach significantly by adding <link
	xlink:href="https://www.centos.org/___blank___">CentOS</link> as a fully supported
	<link
	xlink:href="https://www.qlustar.com/intro/platform___blank___">edge-platform</link>
	together with a tight <link
	xlink:href="https://openhpc.community/___blank___">OpenHPC</link> integration. A second
	major milestone is the revamp of the node boot process which now supports
	fault-tolerant multi-cast.
      </para>
      <para>
	To prepare for ExaScale support, we now ship <link
	xlink:href="https://github.com/pmix/pmix___blank___">pmix</link> as the default MPI
	startup method from within slurm and <link
	xlink:href="http://www.openucx.org/___blank___">ucx</link> as a new communication
	library implementing a high-performance messaging layer for MPI, PGAS, and RPC
	frameworks.
      </para>
      <para>
	The highlights among the numerous component updates and bug fixes are: Kernel 4.14.x,
	Slurm 17.11.x, CUDA 9.1, OpenMPI 3.1.2, Lustre 2.11.
      </para>
    </abstract>
    <author><orgname><inlinemediaobject><imageobject>
	<imagedata fileref="Common_Content/images/qlustar-logo.png" format="PNG" />
      </imageobject></inlinemediaobject></orgname></author>
  </info>
  <section>
    <title>Basic Info</title>
      <para>
	The Qlustar 10.1 release is based on Ubuntu 16.04.5. It includes all security fixes and
	other package updates published before Sep 19th 2018. Available security updates
	relevant to Qlustar 10.1, that have appeared after this date, will be announced on the
	Qlustar website and in the Qlustar security newsletter. Supported edge-platforms are
	Ubuntu 16.04 (Xenial) and the newly available CentOS 7.5 with integration of OpenHPC
	1.3.5.
      </para>
  </section>
  <section>
    <title>New features</title>
    <section>
      <title>CentOS edge-platform</title>
      <variablelist>
	<varlistentry>
	  <term>CentOS image modules</term>
	  <listitem>
	    <para>
	      The following Qlustar image modules are provided to create CentOS based OS
	      images with exactly the same functionality as their Ubuntu counterparts:
	      <itemizedlist>
		<listitem>
		  <para>
		    Core, Slurm, OFED, Nvidia, Lustre Client, BeeGFS client and Samba
		  </para>
		</listitem>
	      </itemizedlist>
	    </para>
	  </listitem>
	</varlistentry>
	<varlistentry>
	  <term>OpenHPC integration</term>
	  <listitem>
	    <para>
	      The OpenHPC 1.3.5 software repository is automatically available in Qlustar
	      CentOS chroots. If selected at install time, a basic set of OpenHPC packages is
	      available in the CentOS chroot that is created for netboot nodes. Additional
	      desired packages can be installed in a standard fashion using yum.
	      <note>
		<para>
		  Since OpenHPC provides a full-blown development stack for HPC applications,
		  Qlustar relies on these packages rather than providing its own stack as for
		  Ubuntu.
		</para>
	      </note>
	    </para>
	  </listitem>
	</varlistentry>
      </variablelist>
    </section>
    <section>
      <title>Fault-tolerant multi-cast booting of OS images</title>
      <para>
	Extending our revamp of the netboot process for Qlustar nodes in the 10.0 release, two
	major improvements were made:
	<itemizedlist>
	  <listitem>
	    <para>
	      QluMan now supports downloading the OS image via a fast and fault-tolerant
	      multi-cast mechanism. This can reduce boot-time dramatically and allows for
	      simultaneous booting of a virtually unlimited number of cluster nodes without
	      increasing overall boot-time.
	    </para>
	  </listitem>
	  <listitem>
	    <para>
	      Qlustar OS images are now created using squashfs with compression. This reduces
	      the memory footprint of the OS by roughly 66% so that a standard compute node
	      image with slurm and IB support now consumes a mere 160MB of RAM.
	    </para>
	  </listitem>
	</itemizedlist>
      </para>
    </section>
  </section>
  <section>
    <title>Major component updates</title>
      <para>
	<variablelist>
	  <varlistentry>
	    <term>Kernel 4.14</term>
	    <listitem>
	      <para>
		Qlustar 10.1 is based on the 4.14 LTS kernel series.
	      </para>
	    </listitem>
	  </varlistentry>
	  <varlistentry>
	    <term>Slurm</term>
	    <listitem>
	      <para>
		Qlustar 10.1 introduces the Slurm 17.11 series with the current version being
		17.2.9.2.
	      </para>
	    </listitem>
	  </varlistentry>
	  <varlistentry>
	    <term>OpenMPI</term>
	    <listitem>
	      <para>
		Qlustar 10.1 upgrades to OpenMPI 3.1.2 now including support for ucx.
	      </para>
	    </listitem>
	  </varlistentry>
	  <varlistentry>
	    <term>Nvidia CUDA</term>
	    <listitem>
	      <para>
		Qlustar 10.1 provides optimal support for Nvidia GPU hardware by supplying
		pre-compiled and up-to-date kernel drivers as well as CUDA 9.1.
	      </para>
	    </listitem>
	  </varlistentry>
	  <varlistentry>
	    <term>Lustre</term>
	    <listitem>
	      <para>
		Qlustar 10.1 has integrated the most recent Lustre release 2.11 for clients and
		servers with ready-to-use image modules. This is the first release with the
		long awaited <firstterm>Data on MDT</firstterm> feature to significantly
		improve small-file performance.
	      </para>
	    </listitem>
	  </varlistentry>
	</variablelist>
      </para>
  </section>
  <section>
    <title>Other notable package version updates</title>
    <para>
      <itemizedlist>
	<listitem>
	  <para>
	    <classname>rdma-core</classname>: 18.1 (Ubuntu only, on CentOS, the original RHEL
	    OFED stack is used).
	  </para>
	</listitem>
	<listitem>
	  <para>
	    <classname>Intel/PGI Compiler support</classname>: The Qlustar wrapper packages
	    have been updated to support the new version of the PGI community edition 18.4
	    (package qlustar-pgi-dev-tools). Corresponding OpenMPI package variants for this
	    compiler are also provided (both Ubuntu only).
	  </para>
	</listitem>
	<listitem>
	  <para>
	    <classname>BeeGFS</classname>: 6.19
	  </para>
	</listitem>
	<listitem>
	  <para>
	    <classname>ZFS</classname>: 0.7.10
	  </para>
	</listitem>
	<listitem>
	  <para>
	    <classname>singularity</classname>: 2.6.0
	  </para>
	</listitem>
	<listitem>
	  <para>
	    <classname>openblas</classname>: 3.2
	  </para>
	</listitem>
	<listitem>
	  <para>
	    <classname>hwloc</classname>: 1.11.7
	  </para>
	</listitem>
      </itemizedlist>
    </para>
  </section>
  <section>
    <title>General changes/improvements</title>
      <para>
	<itemizedlist>
	  <listitem>
	    <para>
	      Removed support for BLCR checkpoint/restart due to lack of upstream support for
	      newer kernels.
	    </para>
	  </listitem>
	</itemizedlist>
      </para>
  </section>
  <section>
    <title>Update instructions</title>
    <task>
      <title></title>
      <procedure>
	<step>
	  <title>Preparations</title>
	  <para>
	    Upgrading to Qlustar 10.1 is only supported from a 10.0.x release.
	  </para>
	  <note><para>
	    Make sure that you have no unwritten changes in the QluMan database. If you do,
	    write them to disk as described in the <link
	    xlink:href="../QluMan_Guide/index.html#sec-Writing-Config-Files___blank___">
	    QluMan Guide</link> before proceeding with the update.
	  </para></note>
	</step>
	<step>
	  <title>Optionally clone chroots</title>
	  <para>
	    Clone existing Ubuntu 16.04 chroots based on 10.0 and then afterwards upgrade the
	    clones to 10.1. That allows for easy rollback.
	  </para>
	</step>
	<step>
	  <title>Update to 10.1 package sources list</title>
	  <para>
	    The Qlustar apt sources list needs to be changed as follows both on the
	    head-node(s) and in all existing chroot(s) that should be updated.
	    <screen>
<prompt>0 root@cl-head ~ #</prompt>
<command>apt-get update</command>
<prompt>0 root@cl-head ~ #</prompt>
<command>apt-get install qlustar-sources-list-10.1</command>
	    </screen>
	  </para>
	</step>
	<step>
	  <title>Update packages</title>
	  <para>
	    Now proceed as explained in the <link
	    xlink:href="../Administration_Manual/index.html#chap-Updating-Qlustar___blank___">
	    Qlustar Administration Manual</link>.
	  </para>
	</step>
	<step>
	  <title>Reboot head-node(s)</title>
	  <para>
	    Initially only reboot the head-node(s).
	  </para>
	</step>
	<step>
	  <title>Change default MPI startup for slurm</title>
	  <para>
	    To make use of <link
	    xlink:href="https://github.com/pmix/pmix___blank___">pmix</link> as the default MPI
	    startup method, <link
	    xlink:href="../QluMan_Guide/index.html#sec-Slurm-Config___blank___">edit the slurm
	    config header</link> in QluMan and set <emphasis>MpiDefault=pmix</emphasis>. Then
	    <link
	    xlink:href="../QluMan_Guide/index.html#sec-Writing-Config-Files___blank___">write</link>
	    the slurm config.
	  </para>
	</step>
	<step>
	  <title>Regenerating Qlustar images</title>
	  <para>
	    Regenerate your Qlustar images with the 10.1 image modules. To accomplish this,
	    you'll have to select <emphasis>Version 10.1</emphasis> in the QluMan <link
	    xlink:href="../QluMan_Guide/index.html#sec-Qlustar-OS-Images___blank___"> Qlustar
	    Images dialog</link>. If you have new cloned chroots, select those as well.
	  </para>
	</step>
	<step>
	  <title>Write config file changes</title>
	  <para>
	    To activate all changes in the QluMan database that were introduced by the update,
	    they need to be written to disk now. Check the QluMan Guide about <link
	    xlink:href="../QluMan_Guide/index.html#sec-Writing-Config-Files___blank___"> how to
	    write such changes</link>.
	  </para>
	</step>
	<step>
	  <title>Reboot all netboot nodes</title>
	  <para>
	    After the regeneration of the images is complete, and all the above steps have been
	    done, you can reboot all other nodes in the cluster, including virtual FE
	    nodes. This completes the update procedure.
	  </para>
	</step>
      </procedure>
    </task>
  </section>
  <section>
    <title>Changelogs</title>
    <para>
      A detailed log of changes in the image modules can be found in the directories
      <filename>/usr/share/doc/qlustar-module-&#60;module-name&#62;-*-amd64-10.1.0</filename>.
      As an example, in the directory
      <filename>/usr/share/doc/qlustar-module-core-xenial-amd64-10.1.0</filename> you will
      find a summary changelog in <filename>core.changelog</filename>, a complete list of
      packages with version numbers entering the current core module in
      <filename>core.packages.version.gz</filename>, a complete changelog of the core modules
      package versions in <filename>core.packages.version.gz</filename> and finally a complete
      log of changed files in <filename>core.contents.changelog.gz</filename>.
      </para>
      </section>
</article>

